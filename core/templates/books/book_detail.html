{% extends 'base.html' %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="max-w-4xl mx-auto">
        <!-- Back Button -->
        <a
            href="{% url 'book-search-page' %}"
            class="inline-flex items-center text-blue-600 hover:text-blue-800 mb-6"
        >
            ‚Üê Back to Search
        </a>

        {% if error %}
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
            {{ error }}
        </div>
        {% elif book %}
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <div class="md:flex">
                <!-- Book Cover -->
                <div class="md:w-1/3 bg-gray-100 p-8 flex items-center justify-center">
                    {% if book.thumbnail %}
                    <img
                        src="{{ book.thumbnail }}"
                        alt="{{ book.title }}"
                        class="max-w-full h-auto rounded-lg shadow-md"
                    >
                    {% else %}
                    <div class="w-48 h-64 bg-gray-300 rounded-lg flex items-center justify-center">
                        <span class="text-gray-500">No Image Available</span>
                    </div>
                    {% endif %}
                </div>

                <!-- Book Details -->
                <div class="md:w-2/3 p-8">
                    <h1 class="text-3xl font-bold mb-4">{{ book.title }}</h1>

                    {% if book.authors %}
                    <div class="mb-4">
                        <span class="font-semibold text-gray-700">Author(s):</span>
                        <span class="text-gray-600">{{ book.authors|join:", " }}</span>
                    </div>
                    {% endif %}

                    {% if book.page_count %}
                    <div class="mb-4">
                        <span class="font-semibold text-gray-700">Pages:</span>
                        <span class="text-gray-600">{{ book.page_count }}</span>
                    </div>
                    {% endif %}

                    {% if book.categories %}
                    <div class="mb-4">
                        <span class="font-semibold text-gray-700">Categories:</span>
                        <div class="mt-2 flex flex-wrap gap-2">
                            {% for category in book.categories %}
                            <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                                {{ category }}
                            </span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                    {% if book.average_rating %}
                    <div class="mb-4">
                        <span class="font-semibold text-gray-700">Rating:</span>
                        <span class="text-gray-600">{{ book.average_rating }}/5 ({{ book.ratings_count }} ratings)</span>
                    </div>
                    {% endif %}

                    {% if book.description %}
                    <div class="mt-6">
                        <h2 class="text-xl font-semibold mb-3">Description</h2>
                        <p class="text-gray-700 leading-relaxed">{{ book.description }}</p>
                    </div>
                    {% endif %}

                    {% if book.preview_link %}
                    <div class="mt-6">
                        <a
                            href="{{ book.preview_link }}"
                            target="_blank"
                            class="inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
                        >
                            Preview on Google Books
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
